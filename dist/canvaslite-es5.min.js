!function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}console.log(r(1));var o=function e(){n(this,e)};e.exports=o},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(2),u=function(){function e(t,r){if(n(this,e),!t)throw Error("canvas not provided");if(this.canvas=t,this.config={type:"basicEl",visible:!0},r){if(!(r instanceof i))throw Error("Not a proper Group");this.group=r}else this.group=t.rootGroup}return o(e,[{key:"group",value:function(e){return e?(this.group.remove(this),this.group=e,this):this.group}},{key:"erase",value:function(){var e;this.group.remove(this);for(e in this)this.hasOwnProperty(e)&&delete this[e];this.__notifyChange__()}},{key:"hide",value:function(){return this.config.visible&&(this.config.visible=!1,this.__notifyChange__()),this}},{key:"show",value:function(){return this.config.visible||(this.config.visible=!0,this.__notifyChange__()),this}},{key:"toggle",value:function(){return this.config.visible=!this.config.visible,this.__notifyChange__(),this}},{key:"__notifyChange__",value:function(){this.config.visible}}]),e}();e.exports=u},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var u=o.get;if(void 0!==u)return u.call(n)},c=r(1),a=function(e){function t(e,r){n(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return i.config.type="group",i.__members__=[],i}return i(t,e),u(t,[{key:"__checkEl__",value:function(e){if(!(e instanceof c))throw Error("Only elements or groups can be added")}},{key:"__checkGroup__",value:function(e){if(!(e instanceof t))throw Error("Group expected")}},{key:"add",value:function(e){var t=0;if(!isNaN(e.length)){for(t=e.length;t--;)this.add(e[t]);return this}return this.__checkEl__(e),e.group.remove(e),e.group=this,this.__members__.push(e),this}},{key:"addAllFrom",value:function(e){var t=void 0,r=0;for(this.__checkGroup__(e),t=e.__members__,r=t.length;r--;);}},{key:"remove",value:function(e){var t=this.__members__,r=0,n=t.length,o=0;for(this.__checkEl__(e);r<n&&t[r]!==e;++r);if(r===n)throw Error("Element not in current group");for(o=r+1;o<n;++o)t[o-1]=t[o];return t.pop(),delete e.group,this}},{key:"removeAll",value:function(){for(var e=this.__members__,t=e.length;t--;)delete e[t].group;return this.__members__=[],this}},{key:"erase",value:function(){for(var e=this.__members__,r=e.length;r--;)e[r].erase();s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"erase",this).call(this)}}]),t}(c);e.exports=a}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vY2FudmFzbGl0ZS1lczUubWluLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCAzMmNmOWE0OGMwNjAwNDYyYTcwOCIsIndlYnBhY2s6Ly8vLi9zcmMvY29uc3RydWN0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0VsZW1lbnRzL0Jhc2ljRWxlbWVudC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvRWxlbWVudHMvR3JvdXAuanMiXSwibmFtZXMiOlsibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJleHBvcnRzIiwibW9kdWxlIiwiaWQiLCJsb2FkZWQiLCJjYWxsIiwibSIsImMiLCJwIiwiX2NsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIlR5cGVFcnJvciIsImNvbnNvbGUiLCJsb2ciLCJDYW52YXNMaXRlIiwidGhpcyIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImkiLCJsZW5ndGgiLCJkZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJrZXkiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJwcm90b3R5cGUiLCJHcm91cCIsIkJhc2ljRWxlbWVudCIsImNhbnZhcyIsImdyb3VwIiwiRXJyb3IiLCJjb25maWciLCJ0eXBlIiwidmlzaWJsZSIsInJvb3RHcm91cCIsInZhbHVlIiwicmVtb3ZlIiwiaGFzT3duUHJvcGVydHkiLCJfX25vdGlmeUNoYW5nZV9fIiwiX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iLCJzZWxmIiwiUmVmZXJlbmNlRXJyb3IiLCJfaW5oZXJpdHMiLCJzdWJDbGFzcyIsInN1cGVyQ2xhc3MiLCJjcmVhdGUiLCJjb25zdHJ1Y3RvciIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiX2dldCIsImdldCIsIm9iamVjdCIsInByb3BlcnR5IiwicmVjZWl2ZXIiLCJGdW5jdGlvbiIsImRlc2MiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJ1bmRlZmluZWQiLCJwYXJlbnQiLCJnZXRQcm90b3R5cGVPZiIsImdldHRlciIsIl9CYXNpY0VsZW1lbnQiLCJfdGhpcyIsIl9fbWVtYmVyc19fIiwiZWxlbWVudCIsImlzTmFOIiwiYWRkIiwiX19jaGVja0VsX18iLCJwdXNoIiwiYXJyIiwiX19jaGVja0dyb3VwX18iLCJtZW1iZXJzIiwiaWkiLCJqIiwicG9wIiwiZXJhc2UiXSwibWFwcGluZ3MiOiJDQUFTLFNBQVVBLEdDSW5CLFFBQUFDLEdBQUFDLEdBR0EsR0FBQUMsRUFBQUQsR0FDQSxNQUFBQyxHQUFBRCxHQUFBRSxPQUdBLElBQUFDLEdBQUFGLEVBQUFELElBQ0FFLFdBQ0FFLEdBQUFKLEVBQ0FLLFFBQUEsRUFVQSxPQU5BUCxHQUFBRSxHQUFBTSxLQUFBSCxFQUFBRCxRQUFBQyxJQUFBRCxRQUFBSCxHQUdBSSxFQUFBRSxRQUFBLEVBR0FGLEVBQUFELFFBdkJBLEdBQUFELEtBcUNBLE9BVEFGLEdBQUFRLEVBQUFULEVBR0FDLEVBQUFTLEVBQUFQLEVBR0FGLEVBQUFVLEVBQUEsR0FHQVYsRUFBQSxLRE1NLFNBQVNJLEVBQVFELEVBQVNILEdBRS9CLFlBRUEsU0FBU1csR0FBZ0JDLEVBQVVDLEdBQWUsS0FBTUQsWUFBb0JDLElBQWdCLEtBQU0sSUFBSUMsV0FBVSxxQ0VoRGpIQyxRQUFRQyxJQUFJaEIsRUFBUSxHRnVEbkIsSUVuREtpQixHRm1EWSxRQUFTQSxLQUN4Qk4sRUFBZ0JPLEtBQU1ELEdFakR6QmIsR0FBT0QsUUFBVWMsR0YwRFgsU0FBU2IsRUFBUUQsRUFBU0gsR0FFL0IsWUFJQSxTQUFTVyxHQUFnQkMsRUFBVUMsR0FBZSxLQUFNRCxZQUFvQkMsSUFBZ0IsS0FBTSxJQUFJQyxXQUFVLHFDQUZoSCxHQUFJSyxHQUFlLFdBQWMsUUFBU0MsR0FBaUJDLEVB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eUQsRUFBUXpELEdBQUc2RCxPQUdiMUIsR0FBQXZCLEVBQUFELFVBQUF1QixXQUFBNUIsT0FBQXVDLGVBQUFqQyxFQUFBRCxXQUFBLFFBQUFoQixNQUFBWCxLQUFBVyxVSndQTWlCLEdJbldVQyxFQStHcEJoQyxHQUFPRCxRQUFVZ0MiLCJmaWxlIjoiY2FudmFzbGl0ZS1lczUubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge30sXG4vKioqKioqLyBcdFx0XHRpZDogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0Y29uc29sZS5sb2coX193ZWJwYWNrX3JlcXVpcmVfXygxKSk7XG5cdC8qKlxuXHQqIENvbnN0cnVjdG9yIGZ1bmN0aW9uIHRvIGluaXRpYWxpemUgQ2FudmFzTGl0ZVxuXHQqL1xuXHRcblx0dmFyIENhbnZhc0xpdGUgPSBmdW5jdGlvbiBDYW52YXNMaXRlKCkge1xuXHQgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDYW52YXNMaXRlKTtcblx0fTtcblx0Ly8gZXhwb3NpbmcgY2FudmFzbGl0ZSB0byBnbG9iYWwgc3BhY2Vcblx0XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IENhbnZhc0xpdGU7XG5cbi8qKiovIH0sXG4vKiAxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdHZhciBHcm91cCA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdC8qKlxuXHQqIEJhc2ljIEVsZW1lbnQgY2xhc3Ncblx0KiBHcm91cHMgYW5kIG90aGVyIEVsZW1lbnRzIGluaGVyaXRzIHRoaXNcblx0KiBjb250YWlucyBiYXNpYyBtZXRob2RzIGFuZCBwcm9wZXJ0aWVzIHJlcXVpcmVkIGJ5IGFsbCBncm91cHMgb3IgZWxlbWVudHMuXG5cdCovXG5cdFxuXHR2YXIgQmFzaWNFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuXHQgIC8qKlxuXHQgICogQmFzaUVsZW1lbnQgY29uc3RydWN0b3Jcblx0ICAqIGFzc2lnbiB0aGUgZ3JvdXAsIHN0b3JlIGNhbnZhc1xuXHQgICogc2V0IHR5cGUgaW5pdGlhbGx5IHRvICdiYXNpY0VsJ1xuXHQgICovXG5cdCAgZnVuY3Rpb24gQmFzaWNFbGVtZW50KGNhbnZhcywgZ3JvdXApIHtcblx0ICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBCYXNpY0VsZW1lbnQpO1xuXHRcblx0ICAgIGlmICghY2FudmFzKSB7XG5cdCAgICAgIHRocm93IEVycm9yKCdjYW52YXMgbm90IHByb3ZpZGVkJyk7XG5cdCAgICB9XG5cdCAgICB0aGlzLmNhbnZhcyA9IGNhbnZhcztcblx0ICAgIHRoaXMuY29uZmlnID0ge1xuXHQgICAgICB0eXBlOiAnYmFzaWNFbCcsXG5cdCAgICAgIHZpc2libGU6IHRydWVcblx0ICAgIH07XG5cdCAgICAvLyBJbml0aWFsbHkgYXNzaWduIHJvb3QgZ3JvdXAgaWZcblx0ICAgIC8vIGdyb3VwIG5vdCBwcm92aWRlZFxuXHQgICAgaWYgKGdyb3VwKSB7XG5cdCAgICAgIGlmICghKGdyb3VwIGluc3RhbmNlb2YgR3JvdXApKSB7XG5cdCAgICAgICAgdGhyb3cgRXJyb3IoJ05vdCBhIHByb3BlciBHcm91cCcpO1xuXHQgICAgICB9XG5cdCAgICAgIHRoaXMuZ3JvdXAgPSBncm91cDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMuZ3JvdXAgPSBjYW52YXMucm9vdEdyb3VwO1xuXHQgICAgfVxuXHQgIH1cblx0ICAvKipcblx0ICAqIEFzc2lnbiBuZXcgZ3JvdXAgb3Jcblx0ICAqIGdldCB0aGUgY3VycmVudCBhc3NpZ25lZCBncm91cFxuXHQgICovXG5cdFxuXHRcblx0ICBfY3JlYXRlQ2xhc3MoQmFzaWNFbGVtZW50LCBbe1xuXHQgICAga2V5OiAnZ3JvdXAnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGdyb3VwKF9ncm91cCkge1xuXHQgICAgICAvLyBJZiBncm91cCBpcyBwcm92aWRlZCBhc3NpZ24sIG90aGVyd2lzZVxuXHQgICAgICAvLyByZXR1cm4gY3VycmVudCBncm91cFxuXHQgICAgICBpZiAoX2dyb3VwKSB7XG5cdCAgICAgICAgdGhpcy5ncm91cC5yZW1vdmUodGhpcyk7XG5cdCAgICAgICAgdGhpcy5ncm91cCA9IF9ncm91cDtcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5ncm91cDtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgLyoqXG5cdCAgICAqIEVyYXNlIGN1cnJlbnQgZWxlbWVudFxuXHQgICAgKi9cblx0XG5cdCAgfSwge1xuXHQgICAga2V5OiAnZXJhc2UnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGVyYXNlKCkge1xuXHQgICAgICB2YXIga2V5O1xuXHQgICAgICB0aGlzLmdyb3VwLnJlbW92ZSh0aGlzKTtcblx0ICAgICAgLy8gZGVsZXRlIGV2ZXJ5IHByb3BlcnR5IG9mIGVsZW1lbnRcblx0ICAgICAgZm9yIChrZXkgaW4gdGhpcykge1xuXHQgICAgICAgIGlmICh0aGlzLmhhc093blByb3BlcnR5KGtleSkpIHtcblx0ICAgICAgICAgIGRlbGV0ZSB0aGlzW2tleV07XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHRoaXMuX19ub3RpZnlDaGFuZ2VfXygpO1xuXHQgICAgfVxuXHQgICAgLyoqXG5cdCAgICAqIEhpZGUgY3VycmVudCBlbGVtZW50XG5cdCAgICAqL1xuXHRcblx0ICB9LCB7XG5cdCAgICBrZXk6ICdoaWRlJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBoaWRlKCkge1xuXHQgICAgICBpZiAodGhpcy5jb25maWcudmlzaWJsZSkge1xuXHQgICAgICAgIHRoaXMuY29uZmlnLnZpc2libGUgPSBmYWxzZTtcblx0ICAgICAgICB0aGlzLl9fbm90aWZ5Q2hhbmdlX18oKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH1cblx0ICAgIC8qKlxuXHQgICAgKiBTaG93IGN1cnJlbnQgZWxlbWVudFxuXHQgICAgKi9cblx0XG5cdCAgfSwge1xuXHQgICAga2V5OiAnc2hvdycsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gc2hvdygpIHtcblx0ICAgICAgaWYgKCF0aGlzLmNvbmZpZy52aXNpYmxlKSB7XG5cdCAgICAgICAgdGhpcy5jb25maWcudmlzaWJsZSA9IHRydWU7XG5cdCAgICAgICAgdGhpcy5fX25vdGlmeUNoYW5nZV9fKCk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9XG5cdCAgICAvKipcblx0ICAgICogVG9nZ2xlIGN1cnJlbnQgZWxlbWVudCdzIHZpc2liaWxpdHlcblx0ICAgICovXG5cdFxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3RvZ2dsZScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gdG9nZ2xlKCkge1xuXHQgICAgICB0aGlzLmNvbmZpZy52aXNpYmxlID0gIXRoaXMuY29uZmlnLnZpc2libGU7XG5cdCAgICAgIHRoaXMuX19ub3RpZnlDaGFuZ2VfXygpO1xuXHQgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH1cblx0ICAgIC8qKlxuXHQgICAgKiBCZWhhdmUgd2hlbiBwcm9wZXJ0eSBvZiBlbGVtZW50IGlzIGNoYW5nZWRcblx0ICAgICovXG5cdFxuXHQgIH0sIHtcblx0ICAgIGtleTogJ19fbm90aWZ5Q2hhbmdlX18nLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIF9fbm90aWZ5Q2hhbmdlX18oKSB7XG5cdCAgICAgIGlmICh0aGlzLmNvbmZpZy52aXNpYmxlKSB7XG5cdCAgICAgICAgLy8gTm90aWZ5IGNoYW5nZSBvbmx5IGlmIHZpc2libGVcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIEJhc2ljRWxlbWVudDtcblx0fSgpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBCYXNpY0VsZW1lbnQ7XG5cbi8qKiovIH0sXG4vKiAyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXHRcblx0dmFyIF9nZXQgPSBmdW5jdGlvbiBnZXQob2JqZWN0LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpIHsgaWYgKG9iamVjdCA9PT0gbnVsbCkgb2JqZWN0ID0gRnVuY3Rpb24ucHJvdG90eXBlOyB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBwcm9wZXJ0eSk7IGlmIChkZXNjID09PSB1bmRlZmluZWQpIHsgdmFyIHBhcmVudCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmplY3QpOyBpZiAocGFyZW50ID09PSBudWxsKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gZWxzZSB7IHJldHVybiBnZXQocGFyZW50LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpOyB9IH0gZWxzZSBpZiAoXCJ2YWx1ZVwiIGluIGRlc2MpIHsgcmV0dXJuIGRlc2MudmFsdWU7IH0gZWxzZSB7IHZhciBnZXR0ZXIgPSBkZXNjLmdldDsgaWYgKGdldHRlciA9PT0gdW5kZWZpbmVkKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gcmV0dXJuIGdldHRlci5jYWxsKHJlY2VpdmVyKTsgfSB9O1xuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdGZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cdFxuXHQvKipcblx0KiBNYW5hZ2UgYWxsIHRoZSBncm91cCBlbGVtZW50cyBiZWxvbmdzIHRvXG5cdCovXG5cdHZhciBCYXNpY0VsZW1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXHRcblx0LyoqXG5cdCogTWFuYWdlIGdyb3VwcyB0aGF0IGVsZW1lbnRzIGJlbG9uZyB0b1xuXHQqIGV4dGVuZHMgQmFzaWNFbGVtZW50XG5cdCovXG5cdFxuXHR2YXIgR3JvdXAgPSBmdW5jdGlvbiAoX0Jhc2ljRWxlbWVudCkge1xuXHQgIF9pbmhlcml0cyhHcm91cCwgX0Jhc2ljRWxlbWVudCk7XG5cdFxuXHQgIGZ1bmN0aW9uIEdyb3VwKGNhbnZhcywgZ3JvdXApIHtcblx0ICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBHcm91cCk7XG5cdFxuXHQgICAgLy8gU2V0IHR5cGUgdG8gZ3JvdXBcblx0ICAgIHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChHcm91cC5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKEdyb3VwKSkuY2FsbCh0aGlzLCBjYW52YXMsIGdyb3VwKSk7XG5cdFxuXHQgICAgX3RoaXMuY29uZmlnLnR5cGUgPSAnZ3JvdXAnO1xuXHQgICAgX3RoaXMuX19tZW1iZXJzX18gPSBbXTtcblx0ICAgIHJldHVybiBfdGhpcztcblx0ICB9XG5cdCAgLyoqXG5cdCAgKiBDaGVjayBpZiBpcyBwcm9wZXIgZWxlbWVudCBvciBncm91cFxuXHQgICovXG5cdFxuXHRcblx0ICBfY3JlYXRlQ2xhc3MoR3JvdXAsIFt7XG5cdCAgICBrZXk6ICdfX2NoZWNrRWxfXycsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gX19jaGVja0VsX18oZWxlbWVudCkge1xuXHQgICAgICBpZiAoIShlbGVtZW50IGluc3RhbmNlb2YgQmFzaWNFbGVtZW50KSkge1xuXHQgICAgICAgIHRocm93IEVycm9yKCdPbmx5IGVsZW1lbnRzIG9yIGdyb3VwcyBjYW4gYmUgYWRkZWQnKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgLyoqXG5cdCAgICAqIENoZWNrIGlmIGlzIHByb3BlciBncm91cFxuXHQgICAgKi9cblx0XG5cdCAgfSwge1xuXHQgICAga2V5OiAnX19jaGVja0dyb3VwX18nLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIF9fY2hlY2tHcm91cF9fKGVsZW1lbnQpIHtcblx0ICAgICAgaWYgKCEoZWxlbWVudCBpbnN0YW5jZW9mIEdyb3VwKSkge1xuXHQgICAgICAgIHRocm93IEVycm9yKCdHcm91cCBleHBlY3RlZCcpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICAvKipcblx0ICAgICogQWRkIG5ldyBlbGVtZW50cyBvciBncm91cHNcblx0ICAgICogdG8gY3VycmVudCBncm91cFxuXHQgICAgKi9cblx0XG5cdCAgfSwge1xuXHQgICAga2V5OiAnYWRkJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBhZGQoZWxlbWVudCkge1xuXHQgICAgICB2YXIgaSA9IDA7XG5cdCAgICAgIC8vIElmIEFycmF5IGFkZCBhbGwgZWxlbWVudHNcblx0ICAgICAgaWYgKCFpc05hTihlbGVtZW50Lmxlbmd0aCkpIHtcblx0ICAgICAgICBmb3IgKGkgPSBlbGVtZW50Lmxlbmd0aDsgaS0tOykge1xuXHQgICAgICAgICAgdGhpcy5hZGQoZWxlbWVudFtpXSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgICB9XG5cdCAgICAgIHRoaXMuX19jaGVja0VsX18oZWxlbWVudCk7XG5cdCAgICAgIC8vIFJlbW92ZSBwcmV2aW91cyBncm91cDtcblx0ICAgICAgZWxlbWVudC5ncm91cC5yZW1vdmUoZWxlbWVudCk7XG5cdCAgICAgIC8vIGFzc3NpZ24gbmV3IGdyb3VwXG5cdCAgICAgIGVsZW1lbnQuZ3JvdXAgPSB0aGlzO1xuXHQgICAgICB0aGlzLl9fbWVtYmVyc19fLnB1c2goZWxlbWVudCk7XG5cdCAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfVxuXHQgICAgLyoqXG5cdCAgICAqIEFkZCBuZXcgZWxlbWVudHMgb3IgZ3JvdXBzXG5cdCAgICAqIHRvIGN1cnJlbnQgZ3JvdXAgZnJvbSBkaWZmZXJlbnQgZ3JvdXBcblx0ICAgICovXG5cdFxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2FkZEFsbEZyb20nLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGFkZEFsbEZyb20oZ3JvdXApIHtcblx0ICAgICAgdmFyIGFyciA9IHZvaWQgMCxcblx0ICAgICAgICAgIGkgPSAwO1xuXHQgICAgICB0aGlzLl9fY2hlY2tHcm91cF9fKGdyb3VwKTtcblx0ICAgICAgYXJyID0gZ3JvdXAuX19tZW1iZXJzX187XG5cdCAgICAgIGZvciAoaSA9IGFyci5sZW5ndGg7IGktLTspIHt9XG5cdCAgICB9XG5cdCAgICAvKipcblx0ICAgICogUmVtb3ZlIGVsZW1lbnQgaXMgbWVtYmVyIG9mIGN1cnJlbnQgZ3JvdXBcblx0ICAgICovXG5cdFxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3JlbW92ZScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlKGVsZW1lbnQpIHtcblx0ICAgICAgdmFyIG1lbWJlcnMgPSB0aGlzLl9fbWVtYmVyc19fLFxuXHQgICAgICAgICAgaSA9IDAsXG5cdCAgICAgICAgICBpaSA9IG1lbWJlcnMubGVuZ3RoLFxuXHQgICAgICAgICAgaiA9IDA7XG5cdCAgICAgIHRoaXMuX19jaGVja0VsX18oZWxlbWVudCk7XG5cdCAgICAgIGZvciAoOyBpIDwgaWk7ICsraSkge1xuXHQgICAgICAgIGlmIChtZW1iZXJzW2ldID09PSBlbGVtZW50KSB7XG5cdCAgICAgICAgICBicmVhaztcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKGkgPT09IGlpKSB7XG5cdCAgICAgICAgLy8gRWxlbWVudCBub3QgZm91bmRcblx0ICAgICAgICB0aHJvdyBFcnJvcignRWxlbWVudCBub3QgaW4gY3VycmVudCBncm91cCcpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIC8vIFJlbW92ZSB0aGUgZWxlbWVudFxuXHQgICAgICAgIGZvciAoaiA9IGkgKyAxOyBqIDwgaWk7ICsraikge1xuXHQgICAgICAgICAgbWVtYmVyc1tqIC0gMV0gPSBtZW1iZXJzW2pdO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBtZW1iZXJzLnBvcCgpO1xuXHQgICAgICAgIGRlbGV0ZSBlbGVtZW50Lmdyb3VwO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfVxuXHQgICAgLyoqXG5cdCAgICAqIFJlbW92ZSBhbGwgZWxlbWVudHNcblx0ICAgICovXG5cdFxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3JlbW92ZUFsbCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlQWxsKCkge1xuXHQgICAgICB2YXIgbWVtYmVycyA9IHRoaXMuX19tZW1iZXJzX18sXG5cdCAgICAgICAgICBpID0gbWVtYmVycy5sZW5ndGg7XG5cdCAgICAgIGZvciAoOyBpLS07KSB7XG5cdCAgICAgICAgZGVsZXRlIG1lbWJlcnNbaV0uZ3JvdXA7XG5cdCAgICAgIH1cblx0ICAgICAgLy8gUmVtb3ZlIHJlZmVyZW5jZXMgb2YgYWxsIGVsZW1lbnRzXG5cdCAgICAgIHRoaXMuX19tZW1iZXJzX18gPSBbXTtcblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9XG5cdCAgICAvKipcblx0ICAgICogT3ZlcnJpZGluZyBtZXRob2Rcblx0ICAgICogRXJhc2UgY3VycmVudCBncm91cCBhbmQgYWxsIGl0cyBjaGlsZHJlblxuXHQgICAgKi9cblx0XG5cdCAgfSwge1xuXHQgICAga2V5OiAnZXJhc2UnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGVyYXNlKCkge1xuXHQgICAgICB2YXIgbWVtYmVycyA9IHRoaXMuX19tZW1iZXJzX18sXG5cdCAgICAgICAgICBpID0gbWVtYmVycy5sZW5ndGg7XG5cdCAgICAgIC8vIHJlbW92ZSBhbGwgY2hpbGRyZW5cblx0ICAgICAgZm9yICg7IGktLTspIHtcblx0ICAgICAgICBtZW1iZXJzW2ldLmVyYXNlKCk7XG5cdCAgICAgIH1cblx0ICAgICAgLy8gUmVtb3ZlIHNlbGZcblx0ICAgICAgX2dldChHcm91cC5wcm90b3R5cGUuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihHcm91cC5wcm90b3R5cGUpLCAnZXJhc2UnLCB0aGlzKS5jYWxsKHRoaXMpO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIEdyb3VwO1xuXHR9KEJhc2ljRWxlbWVudCk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IEdyb3VwO1xuXG4vKioqLyB9XG4vKioqKioqLyBdKTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gY2FudmFzbGl0ZS1lczUubWluLmpzIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG5cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGV4cG9ydHM6IHt9LFxuIFx0XHRcdGlkOiBtb2R1bGVJZCxcbiBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay9ib290c3RyYXAgMzJjZjlhNDhjMDYwMDQ2MmE3MDgiLCJjb25zb2xlLmxvZyhyZXF1aXJlKCcuL0VsZW1lbnRzL0Jhc2ljRWxlbWVudC5qcycpKTtcbi8qKlxuKiBDb25zdHJ1Y3RvciBmdW5jdGlvbiB0byBpbml0aWFsaXplIENhbnZhc0xpdGVcbiovXG5jbGFzcyBDYW52YXNMaXRlIHtcbn1cbi8vIGV4cG9zaW5nIGNhbnZhc2xpdGUgdG8gZ2xvYmFsIHNwYWNlXG5tb2R1bGUuZXhwb3J0cyA9IENhbnZhc0xpdGU7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29uc3RydWN0b3IuanMiLCJsZXQgR3JvdXAgPSByZXF1aXJlKCcuL0dyb3VwLmpzJyk7XG4vKipcbiogQmFzaWMgRWxlbWVudCBjbGFzc1xuKiBHcm91cHMgYW5kIG90aGVyIEVsZW1lbnRzIGluaGVyaXRzIHRoaXNcbiogY29udGFpbnMgYmFzaWMgbWV0aG9kcyBhbmQgcHJvcGVydGllcyByZXF1aXJlZCBieSBhbGwgZ3JvdXBzIG9yIGVsZW1lbnRzLlxuKi9cbmNsYXNzIEJhc2ljRWxlbWVudCB7XG4gIC8qKlxuICAqIEJhc2lFbGVtZW50IGNvbnN0cnVjdG9yXG4gICogYXNzaWduIHRoZSBncm91cCwgc3RvcmUgY2FudmFzXG4gICogc2V0IHR5cGUgaW5pdGlhbGx5IHRvICdiYXNpY0VsJ1xuICAqL1xuICBjb25zdHJ1Y3RvciAoY2FudmFzLCBncm91cCkge1xuICAgIGlmICghY2FudmFzKSB7XG4gICAgICB0aHJvdyBFcnJvcignY2FudmFzIG5vdCBwcm92aWRlZCcpO1xuICAgIH1cbiAgICB0aGlzLmNhbnZhcyA9IGNhbnZhcztcbiAgICB0aGlzLmNvbmZpZyA9IHtcbiAgICAgIHR5cGU6ICdiYXNpY0VsJyxcbiAgICAgIHZpc2libGU6IHRydWVcbiAgICB9O1xuICAgIC8vIEluaXRpYWxseSBhc3NpZ24gcm9vdCBncm91cCBpZlxuICAgIC8vIGdyb3VwIG5vdCBwcm92aWRlZFxuICAgIGlmIChncm91cCkge1xuICAgICAgaWYgKCEoZ3JvdXAgaW5zdGFuY2VvZiBHcm91cCkpIHtcbiAgICAgICAgdGhyb3cgRXJyb3IoJ05vdCBhIHByb3BlciBHcm91cCcpO1xuICAgICAgfVxuICAgICAgdGhpcy5ncm91cCA9IGdyb3VwO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmdyb3VwID0gY2FudmFzLnJvb3RHcm91cDtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICogQXNzaWduIG5ldyBncm91cCBvclxuICAqIGdldCB0aGUgY3VycmVudCBhc3NpZ25lZCBncm91cFxuICAqL1xuICBncm91cCAoZ3JvdXApIHtcbiAgICAvLyBJZiBncm91cCBpcyBwcm92aWRlZCBhc3NpZ24sIG90aGVyd2lzZVxuICAgIC8vIHJldHVybiBjdXJyZW50IGdyb3VwXG4gICAgaWYgKGdyb3VwKSB7XG4gICAgICB0aGlzLmdyb3VwLnJlbW92ZSh0aGlzKTtcbiAgICAgIHRoaXMuZ3JvdXAgPSBncm91cDtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5ncm91cDtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICogRXJhc2UgY3VycmVudCBlbGVtZW50XG4gICovXG4gIGVyYXNlICgpIHtcbiAgICB2YXIga2V5O1xuICAgIHRoaXMuZ3JvdXAucmVtb3ZlKHRoaXMpO1xuICAgIC8vIGRlbGV0ZSBldmVyeSBwcm9wZXJ0eSBvZiBlbGVtZW50XG4gICAgZm9yIChrZXkgaW4gdGhpcykge1xuICAgICAgaWYgKHRoaXMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICBkZWxldGUgdGhpc1trZXldO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLl9fbm90aWZ5Q2hhbmdlX18oKTtcbiAgfVxuICAvKipcbiAgKiBIaWRlIGN1cnJlbnQgZWxlbWVudFxuICAqL1xuICBoaWRlICgpIHtcbiAgICBpZiAodGhpcy5jb25maWcudmlzaWJsZSkge1xuICAgICAgdGhpcy5jb25maWcudmlzaWJsZSA9IGZhbHNlO1xuICAgICAgdGhpcy5fX25vdGlmeUNoYW5nZV9fKCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAqIFNob3cgY3VycmVudCBlbGVtZW50XG4gICovXG4gIHNob3cgKCkge1xuICAgIGlmICghdGhpcy5jb25maWcudmlzaWJsZSkge1xuICAgICAgdGhpcy5jb25maWcudmlzaWJsZSA9IHRydWU7XG4gICAgICB0aGlzLl9fbm90aWZ5Q2hhbmdlX18oKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICogVG9nZ2xlIGN1cnJlbnQgZWxlbWVudCdzIHZpc2liaWxpdHlcbiAgKi9cbiAgdG9nZ2xlICgpIHtcbiAgICB0aGlzLmNvbmZpZy52aXNpYmxlID0gIXRoaXMuY29uZmlnLnZpc2libGU7XG4gICAgdGhpcy5fX25vdGlmeUNoYW5nZV9fKCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICogQmVoYXZlIHdoZW4gcHJvcGVydHkgb2YgZWxlbWVudCBpcyBjaGFuZ2VkXG4gICovXG4gIF9fbm90aWZ5Q2hhbmdlX18gKCkge1xuICAgIGlmICh0aGlzLmNvbmZpZy52aXNpYmxlKSB7XG4gICAgICAvLyBOb3RpZnkgY2hhbmdlIG9ubHkgaWYgdmlzaWJsZVxuICAgIH1cbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEJhc2ljRWxlbWVudDtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9FbGVtZW50cy9CYXNpY0VsZW1lbnQuanMiLCIvKipcbiogTWFuYWdlIGFsbCB0aGUgZ3JvdXAgZWxlbWVudHMgYmVsb25ncyB0b1xuKi9cbmxldCBCYXNpY0VsZW1lbnQgPSByZXF1aXJlKCcuL0Jhc2ljRWxlbWVudC5qcycpO1xuXG4vKipcbiogTWFuYWdlIGdyb3VwcyB0aGF0IGVsZW1lbnRzIGJlbG9uZyB0b1xuKiBleHRlbmRzIEJhc2ljRWxlbWVudFxuKi9cbmNsYXNzIEdyb3VwIGV4dGVuZHMgQmFzaWNFbGVtZW50IHtcbiAgY29uc3RydWN0b3IgKGNhbnZhcywgZ3JvdXApIHtcbiAgICBzdXBlcihjYW52YXMsIGdyb3VwKTtcbiAgICAvLyBTZXQgdHlwZSB0byBncm91cFxuICAgIHRoaXMuY29uZmlnLnR5cGUgPSAnZ3JvdXAnO1xuICAgIHRoaXMuX19tZW1iZXJzX18gPSBbXTtcbiAgfVxuICAvKipcbiAgKiBDaGVjayBpZiBpcyBwcm9wZXIgZWxlbWVudCBvciBncm91cFxuICAqL1xuICBfX2NoZWNrRWxfXyAoZWxlbWVudCkge1xuICAgIGlmICghKGVsZW1lbnQgaW5zdGFuY2VvZiBCYXNpY0VsZW1lbnQpKSB7XG4gICAgICB0aHJvdyBFcnJvcignT25seSBlbGVtZW50cyBvciBncm91cHMgY2FuIGJlIGFkZGVkJyk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAqIENoZWNrIGlmIGlzIHByb3BlciBncm91cFxuICAqL1xuICBfX2NoZWNrR3JvdXBfXyAoZWxlbWVudCkge1xuICAgIGlmICghKGVsZW1lbnQgaW5zdGFuY2VvZiBHcm91cCkpIHtcbiAgICAgIHRocm93IEVycm9yKCdHcm91cCBleHBlY3RlZCcpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgKiBBZGQgbmV3IGVsZW1lbnRzIG9yIGdyb3Vwc1xuICAqIHRvIGN1cnJlbnQgZ3JvdXBcbiAgKi9cbiAgYWRkIChlbGVtZW50KSB7XG4gICAgbGV0IGkgPSAwO1xuICAgIC8vIElmIEFycmF5IGFkZCBhbGwgZWxlbWVudHNcbiAgICBpZiAoIWlzTmFOKGVsZW1lbnQubGVuZ3RoKSkge1xuICAgICAgZm9yIChpID0gZWxlbWVudC5sZW5ndGg7IGktLTspIHtcbiAgICAgICAgdGhpcy5hZGQoZWxlbWVudFtpXSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgdGhpcy5fX2NoZWNrRWxfXyhlbGVtZW50KTtcbiAgICAvLyBSZW1vdmUgcHJldmlvdXMgZ3JvdXA7XG4gICAgZWxlbWVudC5ncm91cC5yZW1vdmUoZWxlbWVudCk7XG4gICAgLy8gYXNzc2lnbiBuZXcgZ3JvdXBcbiAgICBlbGVtZW50Lmdyb3VwID0gdGhpcztcbiAgICB0aGlzLl9fbWVtYmVyc19fLnB1c2goZWxlbWVudCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICogQWRkIG5ldyBlbGVtZW50cyBvciBncm91cHNcbiAgKiB0byBjdXJyZW50IGdyb3VwIGZyb20gZGlmZmVyZW50IGdyb3VwXG4gICovXG4gIGFkZEFsbEZyb20gKGdyb3VwKSB7XG4gICAgbGV0IGFycixcbiAgICAgIGkgPSAwO1xuICAgIHRoaXMuX19jaGVja0dyb3VwX18oZ3JvdXApO1xuICAgIGFyciA9IGdyb3VwLl9fbWVtYmVyc19fO1xuICAgIGZvciAoaSA9IGFyci5sZW5ndGg7IGktLTspIHtcblxuICAgIH1cbiAgfVxuICAvKipcbiAgKiBSZW1vdmUgZWxlbWVudCBpcyBtZW1iZXIgb2YgY3VycmVudCBncm91cFxuICAqL1xuICByZW1vdmUgKGVsZW1lbnQpIHtcbiAgICBsZXQgbWVtYmVycyA9IHRoaXMuX19tZW1iZXJzX18sXG4gICAgICBpID0gMCxcbiAgICAgIGlpID0gbWVtYmVycy5sZW5ndGgsXG4gICAgICBqID0gMDtcbiAgICB0aGlzLl9fY2hlY2tFbF9fKGVsZW1lbnQpO1xuICAgIGZvciAoOyBpIDwgaWk7ICsraSkge1xuICAgICAgaWYgKG1lbWJlcnNbaV0gPT09IGVsZW1lbnQpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChpID09PSBpaSkgeyAvLyBFbGVtZW50IG5vdCBmb3VuZFxuICAgICAgdGhyb3cgRXJyb3IoJ0VsZW1lbnQgbm90IGluIGN1cnJlbnQgZ3JvdXAnKTtcbiAgICB9IGVsc2UgeyAvLyBSZW1vdmUgdGhlIGVsZW1lbnRcbiAgICAgIGZvciAoaiA9IGkgKyAxOyBqIDwgaWk7ICsraikge1xuICAgICAgICBtZW1iZXJzW2ogLSAxXSA9IG1lbWJlcnNbal07XG4gICAgICB9XG4gICAgICBtZW1iZXJzLnBvcCgpO1xuICAgICAgZGVsZXRlIGVsZW1lbnQuZ3JvdXA7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAqIFJlbW92ZSBhbGwgZWxlbWVudHNcbiAgKi9cbiAgcmVtb3ZlQWxsICgpIHtcbiAgICBsZXQgbWVtYmVycyA9IHRoaXMuX19tZW1iZXJzX18sXG4gICAgICBpID0gbWVtYmVycy5sZW5ndGg7XG4gICAgZm9yICg7IGktLTspIHtcbiAgICAgIGRlbGV0ZSBtZW1iZXJzW2ldLmdyb3VwO1xuICAgIH1cbiAgICAvLyBSZW1vdmUgcmVmZXJlbmNlcyBvZiBhbGwgZWxlbWVudHNcbiAgICB0aGlzLl9fbWVtYmVyc19fID0gW107XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICogT3ZlcnJpZGluZyBtZXRob2RcbiAgKiBFcmFzZSBjdXJyZW50IGdyb3VwIGFuZCBhbGwgaXRzIGNoaWxkcmVuXG4gICovXG4gIGVyYXNlICgpIHtcbiAgICBsZXQgbWVtYmVycyA9IHRoaXMuX19tZW1iZXJzX18sXG4gICAgICBpID0gbWVtYmVycy5sZW5ndGg7XG4gICAgLy8gcmVtb3ZlIGFsbCBjaGlsZHJlblxuICAgIGZvciAoOyBpLS07KSB7XG4gICAgICBtZW1iZXJzW2ldLmVyYXNlKCk7XG4gICAgfVxuICAgIC8vIFJlbW92ZSBzZWxmXG4gICAgc3VwZXIuZXJhc2UoKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEdyb3VwO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL0VsZW1lbnRzL0dyb3VwLmpzIl0sInNvdXJjZVJvb3QiOiIifQ==